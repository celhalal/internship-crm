<title> Customer Details </title>
<h1> Customer List </h1> <br>

<mat-drawer-container class="example-container" autosize>
  <mat-drawer #drawer class="example-sidenav" mode="side">
    <div class="sidebar">
       <h2 style="margin-left: 15px;">MENU</h2>
       <button class="link" type="button"> <img class="image" src="../assets/files.png"> Customer List</button>
       <button class="link" type="button" > <img class="image" src="../assets/info.png"> About</button>
       <button class="link" type="button" > <img class="image" src="../assets/question-mark.png"> Help</button>
       <button class="link" type="button" (click)="signOut()" > <img class="image" src="../assets/exit.png"> Sign Out</button>
       
    </div>
  </mat-drawer>

  <div class="example-sidenav-content">
    <img class="dashboard" src="../assets/list.png" alt="Dashboard" type="button" (click)="drawer.toggle()"/>
    <div class="selection"> <strong> Show <select [(ngModel)]="currentVal">
      <option *ngFor='let in of counter(10) ;let i = index'> {{i+ 1}} </option>
      </select> entries </strong>
    </div>
    
    <input class="more" type="button" value="Collapse All" style="float: right;">
    <input class="hide" type="button" value="Hide All" style="float: right;">
    
    <div class="table">
      <table class="table">
        <thead class="table-primary">
          <tr> <th scope="col"> ID </th>
               <th scope="col"> Company Name </th>
               <th scope="col"> Phone # </th>
               <th scope="col"> Location </th>
               <th scope="col"> Contact Name </th>
               <th scope="col"> Website </th>
               <th scope="col"> Action</th>
          </tr>
        </thead>
    
        <!-- hard coded api (uncomment to work, connected to mock-index.ts) -->
        <!-- <tbody>
          <tr class="body" *ngFor="let index of indices; let i = index">
            <th scope="row"> {{i+1}}</th>
            <td> {{ index.companyName }} </td>
            <td> {{ index.phone }} </td>
            <td> {{ index.location }} </td>
            <td> {{ index.contactName }} </td>
            <td> {{ index.dateEnrolled }} </td>
          </tr>
        </tbody> -->
    
        <!-- backend api online -->
        <div *ngIf="!data.length"> {{getDataFromAPI()}} </div>
        <tbody style="border-bottom: 0.5em solid black;">
          <ng-container *ngFor="let d of data; let i = index" >
            <ng-container *ngIf="i < currentVal">
              <tr (click)="d.expanded = !d.expanded">
                <th scope="row"> {{i+1}}</th>
                <td> {{ d.company.name }} </td>
                <td> {{ d.phone }} </td>
                <td> {{ d.address.street }} {{d.address.suite}} {{d.address.city}}</td>
                <td> {{ d.name }} </td>
                <td> {{ d.website }} </td>
                <td>
                  <div id="{{i}}">
                    <img src="../assets/info.png" alt="More Details" type="button" height ="25" width="25" style="margin-left: 10px;"/>
                  </div>
                </td>
              </tr>
              
            <!-- if user clicked (toggle) i button, set to true, display info -->
            <ng-container *ngIf="d.expanded">
              <td></td>
                <td > <span>Username: </span> {{ data[i].username }} </td>
                <td > <span>Email: </span> {{ data[i].email }}</td>
                <td > <span>Location: </span> {{ data[i].address.street }},
                      {{ data[i].address.suite }}, {{ data[i].address.city }},
                      {{ data[i].address.zipcode }} </td>
                <td > <span>Company's Catch Phrase: </span> {{ data[i].company.catchPhrase }}  </td>
                <td > <span>Company's BS: </span> {{ data[i].company.bs }}  </td>
                <td></td>
              </ng-container>
            </ng-container>
          </ng-container>
        </tbody>
      </table>
    </div>
    <div class="h5 m-3"> Showing {{currentVal}} of {{data.length}} records </div>
    <input class="next" type="button" value="Next" style="float: right;">
    <input class="prev" type="button" value="Previous" style="float: right;">
  </div>
</mat-drawer-container>
