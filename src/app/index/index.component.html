<title> Customer Details </title>

<div class="header" style="border-bottom: 1.5px solid rgb(229, 225, 225);">
  <img src="../assets/logo.png" alt="logo"/>
  <h1 >Customer List</h1>
</div> <br>

<div class="icons">
  <mat-icon class="header" matBadge="19" matBadgeColor="warn"> notifications_none </mat-icon>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-calendar-date" viewBox="0 0 16 16" style="margin-top: -80px; margin-right: 83px; float: right;">
    <path d="M6.445 11.688V6.354h-.633A12.6 12.6 0 0 0 4.5 7.16v.695c.375-.257.969-.62 1.258-.777h.012v4.61h.675zm1.188-1.305c.047.64.594 1.406 1.703 1.406 1.258 0 2-1.066 2-2.871 0-1.934-.781-2.668-1.953-2.668-.926 0-1.797.672-1.797 1.809 0 1.16.824 1.77 1.676 1.77.746 0 1.23-.376 1.383-.79h.027c-.004 1.316-.461 2.164-1.305 2.164-.664 0-1.008-.45-1.05-.82h-.684zm2.953-2.317c0 .696-.559 1.18-1.184 1.18-.601 0-1.144-.383-1.144-1.2 0-.823.582-1.21 1.168-1.21.633 0 1.16.398 1.16 1.23z"/>
    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
  </svg>
  <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16" style="margin-top: -80px; margin-right: 37px; float: right;">
    <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
  </svg>
</div>

<mat-drawer-container class="example-container">
  <mat-drawer #drawer class="example-sidenav" mode="side">
    <div class="sidebar">
       <h2 style="margin: 15px;">
        <mat-icon type="button" (click)="drawer.toggle()" style="margin: 10px;" matBadge="7" matBadgeColor="warn"> home </mat-icon>
          MENU 
        </h2>
        <button class="link" type="button"> <img class="image" src="../assets/analysis.png"> Analytics</button>
       <button class="link" type="button"> <img class="image" src="../assets/files.png"> CRM </button>
       <button class="link" type="button"> <img class="image" src="../assets/online-shopping.png"> Ecommerce </button>
       <button class="link" type="button"> <img class="image" src="../assets/blueprint.png"> Projects </button>
       <div  style="padding: 5px; border-bottom: 1px solid rgb(193, 189, 189);"></div>

       <button class="link" type="button" >
         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-wide-connected" viewBox="0 0 16 16" style="margin-right: 8px;">
          <path d="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434l.071-.286zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5zm0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78h4.723zM5.048 3.967c-.03.021-.058.043-.087.065l.087-.065zm-.431.355A4.984 4.984 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8 4.617 4.322zm.344 7.646.087.065-.087-.065z"/>
        </svg> Settings
      </button>
       <button class="link" type="button" > <img class="image" src="../assets/user.png"> Profile</button>
       <button class="link" type="button" > <img class="image" src="../assets/info.png"> About</button>
       <button class="link" type="button" > <img class="image" src="../assets/question-mark.png"> Help</button>
       <button class="link" type="button" (click)="signOut()" > <img class="image" src="../assets/exit.png"> Sign Out</button>
    </div>
  </mat-drawer>

  <div class="example-sidenav-content"> <br>
    <img class="dashboard" src="../assets/list.png" alt="Dashboard" type="button" (click)="drawer.toggle()"/>    
    <button class="more" (click)="toggle()">{{allRowsExpanded ? 'Collapse' : 'Expand'}}</button>
    <div class="search-hero">
      <input
        class="form-control"
        type="text"
        name="search"
        autocomplete="off"
        placeholder="Filter by Company"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16" style="margin-top: -60px; margin-left:165px">
          <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z"/>
        </svg>
    </div>
        
    <div class="table">
      <table class="table table-hover">
        <thead class="table-primary">
          <tr> <th scope="col"> ID </th>
               <th scope="col"> Company Name </th>
               <th scope="col"> Phone # </th>
               <th scope="col"> Location </th>
               <th scope="col"> Contact Name </th>
               <th scope="col"> Website </th>
               <th scope="col"> Action </th>
          </tr>
        </thead>
    
        <!-- hard coded api (uncomment to work, connected to mock-index.ts) -->
        <!-- <tbody>
          <tr class="body" *ngFor="let index of indices; let i = index">
            <th scope="row"> {{i+1}}</th>
            <td> {{ index.companyName }} </td>
            <td> {{ index.phone }} </td>
            <td> {{ index.location }} </td>
            <td> {{ index.contactName }} </td>
            <td> {{ index.dateEnrolled }} </td>
          </tr>
        </tbody> -->
    
        <!-- backend api online -->
        <div *ngIf="!data.length"> {{getDataFromAPI()}} </div>
        <tbody style="border-bottom: 0.5em solid black;">
          <ng-container *ngFor="let d of data; let i = index" >
            <ng-container *ngIf="i < currentVal">
              <tr (click)="d.expanded = !d.expanded">
                <th scope="row"> {{i+1}}</th>
                <td> {{ d.company.name }} </td>
                <td> {{ d.phone }} </td>
                <td> {{ d.address.street }} {{d.address.suite}} {{d.address.city}}</td>
                <td> {{ d.name }} </td>
                <td> {{ d.website }} </td>
                <td> <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" type="button" fill="currentColor" class="bi bi-info" viewBox="0 0 16 16">
                  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                </svg> </td>
              </tr>
              
            <!-- if user clicked (toggle) i button, set to true, display info -->
            <ng-container *ngIf="d.expanded || allRowsExpanded" >
              <td></td>
                <td > <span>Username: </span> {{ data[i].username }} </td>
                <td > <span>Email: </span> {{ data[i].email }}</td>
                <td > <span>Location: </span> {{ data[i].address.street }},
                      {{ data[i].address.suite }}, {{ data[i].address.city }},
                      {{ data[i].address.zipcode }} </td>
                <td > <span>Company's Catch Phrase: </span> {{ data[i].company.catchPhrase }}  </td>
                <td > <span>Company's BS: </span> {{ data[i].company.bs }}  </td>
                <td></td>
              </ng-container>
            </ng-container>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</mat-drawer-container>

<!-- <mat-paginator
      [length]="data.length"
      [pageSize]=currentVal
      [pageSizeOptions]="[5, 10, 25, 50]"> 
</mat-paginator> <br> -->

<div class="pageInfo">
  <div> {{1}} - {{currentVal}} of {{data.length}}</div>
  <p class="arrow right"></p>
  <p class="arrow left"></p>
</div>

<div class="pageDetails">
  <mat-form-field class="pager">
    <mat-label>Items per page</mat-label>
    <mat-select [(ngModel)]="currentVal">
      <mat-option *ngFor='let in of counter(10); let i = index' [value]="i+1"> {{i+1}} </mat-option>
    </mat-select>
  </mat-form-field>
</div>
